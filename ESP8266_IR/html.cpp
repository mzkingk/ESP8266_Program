#include <Arduino.h>

#include "html.h"

char *index_html = "<!DOCTYPE html><html lang='zh'><head><meta charset='UTF-8'><meta name='viewport' content='width=device-width,initial-scale=1'><title>Document</title><style>.main{text-align:center}.tips{height:200px;display:flex;align-items:center;justify-content:center}.top-div{float:left;width:100%;height:100px}.top-div-1,.top-div-2,.top-div-3{text-align:center;float:left;padding:.5%;width:32%;height:100px}.bottom-div{border-radius:20px;margin:10px auto}.center{display:flex;align-items:center;justify-content:center}.circle{width:50px;height:50px;background:#fff;-moz-border-radius:50px;-webkit-border-radius:50px;border-radius:50px}.top-btn-word{font-size:35px}.input-area{width:80%}</style></head><body><div class='main'><h1>菜单</h1></div><div><div class='top-div center bottom-div'><div class='top-div-1 center' style='width:30%'>1.配置WiFi</div><div class='top-div-1 center' style='width:60%'><a href='/wifi'>进入页面</a></div></div><div class='top-div center bottom-div'><div class='top-div-1 center' style='width:30%'>2.遥控空调</div><div class='top-div-1 center' style='width:60%'><a href='/ir'>进入页面</a></div></div></div></body></html>";

char *wifi_html = "<!DOCTYPE html><html lang='zh'><head><meta charset='UTF-8'><meta name='viewport' content='width=device-width,initial-scale=1'><title>Document</title><style>.main{text-align:center}.tips{height:200px;display:flex;align-items:center;justify-content:center}.top-div{float:left;width:100%;height:100px}.top-div-1,.top-div-2,.top-div-3{text-align:center;float:left;padding:.5%;width:32%;height:100px}.bottom-div{border-radius:20px;margin:10px auto}.center{display:flex;align-items:center;justify-content:center}.circle{width:50px;height:50px;background:#fff;-moz-border-radius:50px;-webkit-border-radius:50px;border-radius:50px}.top-btn-word{font-size:35px}.input-area{width:80%}</style></head><body><div class='main'><a href='/'><h1>wifi配置</h1></a></div><div><div class='top-div center bottom-div'><div class='top-div-1 center' style='width:30%'>1.WiFi名称</div><div class='top-div-1 center' style='width:60%'><input type='text' id='ssid' name='ssid' placeholder='手动输入wifi名' style='width:96%'></div></div><div class='top-div center bottom-div'><div class='top-div-1 center' style='width:30%'>2.选择WiFi</div><div class='top-div-1 center' style='width:60%'><select id='ssid2' style='width:100%' name='ssid2'></select></div></div><div class='top-div center bottom-div'><div class='top-div-1 center' style='width:30%'>WiFi密码</div><div class='top-div-1 center' style='width:60%'><input id='password' type='text' name='password' style='width:96%'></div></div><div onclick='saveData()' class='top-div center bottom-div'><input type='submit' value='提交'></div></div><script type='text/javascript'>function init(){ var oldValue=localStorage.getItem('ssid'); if (oldValue){ document.getElementById('ssid').value=oldValue;}} init(); getData(); function getData(){ var xhttp=new XMLHttpRequest(); xhttp.onreadystatechange=function (){ if (this.readyState==4 && this.status==200){ var list=JSON.parse(this.responseText); if (list){ var data=[]; try{ var dbms=list.map(x=>parseInt(x.substring(1, x.indexOf('dBm')))).sort((x, y)=>x - y); dbms.forEach(function (x){ var fd=list.filter(t=>t.indexOf('-' + x + 'dBm')===0); return data=data.concat(fd);}); data=[...new Set(data)];} catch (error){ data=[...new Set(list)];} var obj=document.getElementById('ssid2'); obj.options.length=0; for (let i=0; i < data.length; i++){ var name=data[i] ? data[i] : '-0dBm'; name=name.substring(name.indexOf('dBm') + 4); obj.options.add(new Option(data[i], name));}}}}; xhttp.open('GET', '/all', true); xhttp.send();} function saveData(){ var ssid=document.getElementById('ssid').value; var ssid2=document.getElementById('ssid2').value; var password=document.getElementById('password').value; var xhttp=new XMLHttpRequest(); xhttp.onreadystatechange=function (){ if (this.readyState==4 && this.status==200){ localStorage.setItem('ssid', ssid || ssid2); window.location.reload();}}; xhttp.open('POST', `/wifi?ssid=${ssid}&ssid2=${ssid2}&password=${password}`, true); xhttp.send();}</script></body></html>";

char *ir_html = "<!DOCTYPE html><html lang='en'><head><meta charset='UTF-8'><meta name='viewport' content='width=device-width,initial-scale=1'><title>Document</title><style>.main{text-align:center}.tips{height:200px;display:flex;align-items:center;justify-content:center}.top-div{float:left;width:100%;height:100px}.top-div-1,.top-div-2,.top-div-3{text-align:center;float:left;padding:.5%;width:32%;height:100px}.bottom-div{border-radius:20px;margin:10px auto}.center{display:flex;align-items:center;justify-content:center}.circle{width:50px;height:50px;background:#fcfdff;-moz-border-radius:50px;-webkit-border-radius:50px;border-radius:50px}.top-btn-word{font-size:35px}</style></head><body><div class='main'><a href='/'><h1>空调配置页</h1></a></div><div class='tips'><span id='temperature'></span><h3 id='current'>关闭</h3></div><div class='top-div'><div onclick='temperatureAdd()' class='top-div-1'><div>温度+</div><button class='circle top-btn-word'>+</button></div><div onclick='onOff()' class='top-div-2'><div>开关</div><button id='onOff' class='circle'>切换</button></div><div onclick='temperatureReduce()' class='top-div-3'><div>温度-</div><button class='circle top-btn-word'>-</button></div></div><div class='top-div center bottom-div' style='background:#fff0f5'><div class='top-div-1 center' style='width:40%'><button class='circle'>+</button></div><div class='top-div-1 center' style='width:40%'><button class='circle'>+</button></div></div><div class='top-div center bottom-div' style='background:#fff0f5'><div class='top-div-1 center' style='width:40%'><button class='circle'>+</button></div><div class='top-div-1 center' style='width:40%'><button class='circle'>+</button></div></div><script type='text/javascript'>var config={ isOn:{ value: false, url: '/ir/onOff', callback: ()=>{ config.isOn.value=!config.isOn.value;}}, temperature:{ value: 26, url: '/ir/temperature', callback: ()=>{ config.isOn.value=!config.isOn.value;}},}; function onOff(){ handler(config.isOn.url, config.isOn.callback);} function temperatureAdd(){ handler(config.temperature.url + '?value=1', ()=>{ config.temperature.value++;});} function temperatureReduce(){ handler(config.temperature.url + '?value=0', ()=>{ config.temperature.value--;});} function handler(url, callback){ var xhttp=new XMLHttpRequest(); xhttp.onreadystatechange=function (){ if (this.readyState==4 && this.status==200){ callback(); statusChange();}}; xhttp.open('POST', url, true); xhttp.send();} function statusChange(){ document.getElementById('current').innerHTML=config.isOn.value ? '开启' : '关闭'; if (config.isOn.value){ document.getElementById('temperature').innerHTML=config.temperature.value;} else{ document.getElementById('temperature').innerHTML='';}}</script></body></html>";
