<!DOCTYPE html><html lang='en'><head><meta charset='UTF-8'><meta name='viewport' content='width=device-width,initial-scale=1'><title>Document</title><style>.main{text-align:center}.tips{height:200px;display:flex;align-items:center;justify-content:center}.top-div{float:left;width:100%;height:100px}.top-div-1,.top-div-2,.top-div-3{text-align:center;float:left;padding:.5%;width:32%;height:100px}.bottom-div{border-radius:20px;margin:10px auto}.center{display:flex;align-items:center;justify-content:center}.circle{width:50px;height:50px;background:#fcfdff;-moz-border-radius:50px;-webkit-border-radius:50px;border-radius:50px}.top-btn-word{font-size:35px}</style></head><body><div class='main'><a href='/'><h1>空调配置</h1></a></div><div class='tips' style='height:30px'><h5 id='text'></h5></div><div class='tips' style='height:30px'><h5 id='modeText'></h5></div><div class='tips' style='height:100px'><h3 id='status'>关闭</h3></div><div class='top-div'><div onclick='temperature(1)' class='top-div-1'><div>温度+</div><button class='circle top-btn-word'>+</button></div><div onclick='onOff()' class='top-div-2'><div>开关</div><button id='onOff' class='circle'>切换</button></div><div onclick='temperature(0)' class='top-div-3'><div>温度-</div><button class='circle top-btn-word'>-</button></div></div><div class='top-div center bottom-div' style='background:#fff0f5'><div onclick='modeChange()' class='top-div-1 center' style='width:40%'><button class='circle'>模式</button></div><div onclick='fanChange()' class='top-div-1 center' style='width:40%'><button class='circle'>风速</button></div></div><div class='top-div center bottom-div' style='background:#fff0f5'><div onclick='swingAuto()' class='top-div-1 center' style='width:40%'><button class='circle'>自动</button></div><div onclick='swingMode()' class='top-div-1 center' style='width:40%'><button class='circle'>扫风</button></div></div><script type='text/javascript'>var config={ status:{ value: false, url: '/ir/onOff'}, temperature:{ value: 26, url: '/ir/temperature',}, mode:{ value: '', text: '', url: '/ir/mode',}, fan:{ value: '', text: '', url: '/ir/fan',}, swingAuto:{ value: '', text: '', url: '/ir/swing-auto',}, swingMode:{ value: '', text: '', url: '/ir/swing-change',},}; var modeText=['自动', '冷风', '干燥', '换气', '暖风']; var fanText=['自动', '低', '中', '高']; var swingText=['kGreeSwingLastPos', 'kGreeSwingAuto', 'kGreeSwingUp', 'kGreeSwingMiddleUp', 'kGreeSwingMiddle', 'kGreeSwingMiddleDown', 'kGreeSwingDown', 'kGreeSwingDownAuto', 'kGreeSwingMiddleAuto', 'kGreeSwingUpAuto']; function onOff(){ handler(config.status.url);} function temperature(v){ handler(config.temperature.url + '?value=' + parseInt(v));} function modeChange(){ handler(config.mode.url);} function fanChange(){ handler(config.fan.url);} function swingAuto(){ handler(config.swingAuto.url);} function swingMode(){ handler(config.swingMode.url);} handler('/ir/config'); function handler(url, callback){ var xhttp=new XMLHttpRequest(); xhttp.onreadystatechange=function (){ if (this.readyState==4 && this.status==200){ var text=this.responseText; try{ var obj=JSON.parse(text); config.status.value=obj.status==='1'; config.temperature.value=obj.temperature; config.mode.value=obj.mode; config.mode.text=modeText[obj.mode]; config.fan.value=obj.fan; config.fan.text=fanText[obj.fan]; config.swingAuto.value=obj.swingAuto; config.swingMode.value=obj.swingMode; config.swingAuto.text=obj.swingAuto==='1' ? '摆风开' : '摆风关'; config.swingMode.text=swingText[obj.swingMode];} catch (error){ alert(text);} if (typeof callback==='function'){ callback();} statusChange();}}; xhttp.open('POST', url, true); xhttp.send();} function statusChange(){ document.getElementById('status').innerHTML=config.status.value ? '开启' : '关闭'; if (config.status.value){ var text=config.temperature.value + ' ℃;'; text +=` ${config.fan.text}`; text +=` ${config.swingAuto.text}-${config.swingMode.text}`; document.getElementById('text').innerHTML=text; document.getElementById('modeText').innerHTML=modeText[config.mode.value];;} else{ document.getElementById('text').innerHTML='';}}</script></body></html>